.TH "opti_write_reg" 9 "opti_write_reg" "May 2021" "Kernel Hacker's Manual" LINUX
.SH NAME
opti_write_reg \- control register setup
.SH SYNOPSIS
.B "void" opti_write_reg
.BI "(struct ata_port *ap "  ","
.BI "u8 val "  ","
.BI "int reg "  ");"
.SH ARGUMENTS
.IP "ap" 12
ATA port
.IP "val" 12
-- undescribed --
.IP "reg" 12
control register number

The Opti uses magic 'trapdoor' register accesses to do configuration
rather than using PCI space as other controllers do. The double inw
on the error register activates configuration mode. We can then write
the control register
