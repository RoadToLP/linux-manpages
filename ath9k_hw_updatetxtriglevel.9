.TH "ath9k_hw_updatetxtriglevel" 9 "ath9k_hw_updatetxtriglevel" "May 2021" "Kernel Hacker's Manual" LINUX
.SH NAME
ath9k_hw_updatetxtriglevel \- adjusts the frame trigger level
.SH SYNOPSIS
.B "bool" ath9k_hw_updatetxtriglevel
.BI "(struct ath_hw *ah "  ","
.BI "bool bIncTrigLevel "  ");"
.SH ARGUMENTS
.IP "ah" 12
atheros hardware struct
.IP "bIncTrigLevel" 12
whether or not the frame trigger level should be updated
.SH "DESCRIPTION"
The frame trigger level specifies the minimum number of bytes,
in units of 64 bytes, that must be DMA'ed into the PCU TX FIFO
before the PCU will initiate sending the frame on the air. This can
mean we initiate transmit before a full frame is on the PCU TX FIFO.
Resets to 0x1 (meaning 64 bytes or a full frame, whichever occurs
first)

Caution must be taken to ensure to set the frame trigger level based
on the DMA request size. For example if the DMA request size is set to
128 bytes the trigger level cannot exceed 6 * 64 = 384. This is because
there need to be enough space in the tx FIFO for the requested transfer
size. Hence the tx FIFO will stop with 512 - 128 = 384 bytes. If we set
the threshold to a value beyond 6, then the transmit will hang.

Current dual   stream devices have a PCU TX FIFO size of 8 KB.
Current single stream devices have a PCU TX FIFO size of 4 KB, however,
there is a hardware issue which forces us to use 2 KB instead so the
frame trigger level must not exceed 2 KB for these chipsets.
