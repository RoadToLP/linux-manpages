.TH "bio_integrity_prep" 9 "bio_integrity_prep" "May 2021" "Kernel Hacker's Manual" LINUX
.SH NAME
bio_integrity_prep \- Prepare bio for integrity I/O
.SH SYNOPSIS
.B "bool" bio_integrity_prep
.BI "(struct bio *bio "  ");"
.SH ARGUMENTS
.IP "bio" 12
bio to prepare
.SH "DESCRIPTION"
Checks if the bio already has an integrity payload attached.
If it does, the payload has been generated by another kernel subsystem,
and we just pass it through. Otherwise allocates integrity payload.
The bio must have data direction, target device and start sector set priot
to calling.  In the WRITE case, integrity metadata will be generated using
the block device's integrity function.  In the READ case, the buffer
will be prepared for DMA and a suitable end_io handler set up.
